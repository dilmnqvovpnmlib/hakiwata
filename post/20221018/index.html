<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.110.0"><title>「12 ステップで作る 組込みOS自作入門」
を読んでOS を作成してみた - haytok's Website</title><meta name=description content="概要 12 ステップで作る 組込み OS 自作入門 を読んで、マイコン (Ｈ８／３０６９Ｆネット対応マイコンＬＡＮボード（完成品）) のリソースを管理する小さな OS (marinOS) を実装してみました。 割り込みベースでスレッドが切り替わる OS で、いわゆるマイクロカーネルのような思想で実装しています。この本を読んで実装したことを通して学んだことなどの感想を簡単に残したいと思います。なお、本記事は個人の見解であり、所属組織を代表するものではありません。
感想と勉強になったこと この書籍をベースに小さな OS を作成することで学べたことなどを以下に示します。
必要に応じて仕様書を読み込むことの大切さ (H8/3069 F-ZTAT TM ハードウェアマニュアル, XMODEM, Tool Interface Standard (TIS) Executable and Linking Format (ELF) Specification Version 1.2, etc &mldr;) C 言語 / アセンブリ言語 / スタックの伸長などの低レイヤーの基本 リンカスクリプトを使用したコードやメモリ配置の調整方法 標準ライブラリを一切使用せずにフルスクラッチで必要な処理の実装方法 デバイスドライバのような機能の実装方法 Bootloader の実装方法 ファイル転送プロトコル (XMODEM) の実装方法 ELF ファイルを解析し RAM 上の指定した領域へ展開して起動させるための機能の実装方法 割り込み処理の実装方法 複数のスレッドを起動させ、優先度に応じてスレッドをスケジューリングさせる機能の実装方法 メモリ管理の機能の実装方法 IPC の機能の実装方法 ビジーループではなく外部割り込みを捌く処理の実装方法 この書籍自体は割と古めの本なのですが、このような OS (Kernel) の基本的な機能やマイコンプログラミングの基礎を学べたのは貴重な経験でした。個人的には GUI の複雑なレンダリング処理の実装等の必要が無く、外部のライブラリに依存することなく OS (Kernel) の機能の実装に注力することができたので、学生の頃に読んだ ゼロからの OS 自作入門 よりは取っ付きやすかったです。また、マイコンのメモリを直接的かつ自由に取り扱うことができたので、メモリ管理に対する苦手意識が減り、メモリモデルに関する関心が芽生えました。なお、ゼロからの OS 自作入門 もすごいたくさんのことを学べた本なので、時間があるうちに再度読み直したいと考えています。先にこの本を読んでいれば、また見方が変わったのかなとも思います。"><link rel="shortcut icon" href=https://haytok.jp/img/images/favicon.ico><link rel=stylesheet href=https://haytok.jp/css/ui.css><link rel=stylesheet href=https://haytok.jp/css/main.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Fira+Mono|Lato|Raleway"><meta property="og:title" content="「12 ステップで作る 組込みOS自作入門」
を読んでOS を作成してみた"><meta property="og:description" content="概要 12 ステップで作る 組込み OS 自作入門 を読んで、マイコン (Ｈ８／３０６９Ｆネット対応マイコンＬＡＮボード（完成品）) のリソースを管理する小さな OS (marinOS) を実装してみました。 割り込みベースでスレッドが切り替わる OS で、いわゆるマイクロカーネルのような思想で実装しています。この本を読んで実装したことを通して学んだことなどの感想を簡単に残したいと思います。なお、本記事は個人の見解であり、所属組織を代表するものではありません。
感想と勉強になったこと この書籍をベースに小さな OS を作成することで学べたことなどを以下に示します。
必要に応じて仕様書を読み込むことの大切さ (H8/3069 F-ZTAT TM ハードウェアマニュアル, XMODEM, Tool Interface Standard (TIS) Executable and Linking Format (ELF) Specification Version 1.2, etc &mldr;) C 言語 / アセンブリ言語 / スタックの伸長などの低レイヤーの基本 リンカスクリプトを使用したコードやメモリ配置の調整方法 標準ライブラリを一切使用せずにフルスクラッチで必要な処理の実装方法 デバイスドライバのような機能の実装方法 Bootloader の実装方法 ファイル転送プロトコル (XMODEM) の実装方法 ELF ファイルを解析し RAM 上の指定した領域へ展開して起動させるための機能の実装方法 割り込み処理の実装方法 複数のスレッドを起動させ、優先度に応じてスレッドをスケジューリングさせる機能の実装方法 メモリ管理の機能の実装方法 IPC の機能の実装方法 ビジーループではなく外部割り込みを捌く処理の実装方法 この書籍自体は割と古めの本なのですが、このような OS (Kernel) の基本的な機能やマイコンプログラミングの基礎を学べたのは貴重な経験でした。個人的には GUI の複雑なレンダリング処理の実装等の必要が無く、外部のライブラリに依存することなく OS (Kernel) の機能の実装に注力することができたので、学生の頃に読んだ ゼロからの OS 自作入門 よりは取っ付きやすかったです。また、マイコンのメモリを直接的かつ自由に取り扱うことができたので、メモリ管理に対する苦手意識が減り、メモリモデルに関する関心が芽生えました。なお、ゼロからの OS 自作入門 もすごいたくさんのことを学べた本なので、時間があるうちに再度読み直したいと考えています。先にこの本を読んでいれば、また見方が変わったのかなとも思います。"><meta property="og:type" content="article"><meta property="og:url" content="https://haytok.jp/post/20221018/"><meta property="og:image" content="https://haytok.jp/"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-10-17T16:00:17+00:00"><meta property="article:modified_time" content="2022-10-17T16:00:17+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@bilmnpvovqnmlid"><meta name=twitter:creator content="@bilmnpvovqnmlid"><meta property="twitter:image" content="https://haytok.jp/img/images/20221018.png"><meta property="og:title" content="「12 ステップで作る 組込みOS自作入門」
を読んでOS を作成してみた"><meta property="og:url" content="https://haytok.jp/post/20221018/"><meta property="og:image" content="https://haytok.jp/img/images/20221018.png"><meta property="og:description" content><script async src="https://www.googletagmanager.com/gtag/js?id=G-YXCYPL25QW"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-YXCYPL25QW",{anonymize_ip:!1})}</script></head><body><header class="container no-print"><div class=u-header><nav class=bar><ul><li><a href=https://haytok.jp/><img class=icon-text src=https://haytok.jp/img/prev.svg></a></li><li><a href=https://haytok.jp/about>About</a></li><li><a href=https://haytok.jp/log>Log</a></li><li><a href=https://haytok.jp/post>Post</a></li><li><a href=https://haytok.jp/scraps>Scraps</a></li><li><a href=https://haytok.jp/tags>Tags</a></li></ul></nav></div></header><main class=container><article><header><hgroup id=brand><h1>「12 ステップで作る 組込みOS自作入門」
を読んでOS を作成してみた</h1><h5><time datetime="2022-10-17 16:00:17 +0000 UTC">Oct 17, 2022</time>
<span class=no-print>-
<a href=https://haytok.jp/tags/os>OS</a>
<a href=https://haytok.jp/tags/kernel>Kernel</a>
<a href=https://haytok.jp/tags/c>C</a>
<span></h5></hgroup><hr class=sep></header><h2 id=概要>概要</h2><p><a href=https://kozos.jp/books/makeos/>12 ステップで作る 組込み OS 自作入門</a> を読んで、マイコン (<a href=https://akizukidenshi.com/catalog/g/gK-01271/>Ｈ８／３０６９Ｆネット対応マイコンＬＡＮボード（完成品）</a>) のリソースを管理する小さな OS (<a href=https://github.com/haytok/marinOS>marinOS</a>) を実装してみました。 割り込みベースでスレッドが切り替わる OS で、いわゆるマイクロカーネルのような思想で実装しています。この本を読んで実装したことを通して学んだことなどの感想を簡単に残したいと思います。なお、本記事は個人の見解であり、所属組織を代表するものではありません。</p><h2 id=感想と勉強になったこと>感想と勉強になったこと</h2><p>この書籍をベースに小さな OS を作成することで学べたことなどを以下に示します。</p><ol><li>必要に応じて仕様書を読み込むことの大切さ (<a href=http://www.picosystems.net/dl/ds/device/HD64F3069.pdf>H8/3069 F-ZTAT TM ハードウェアマニュアル</a>, <a href=https://ja.wikipedia.org/wiki/XMODEM>XMODEM</a>, <a href=https://refspecs.linuxfoundation.org/elf/elf.pdf>Tool Interface Standard (TIS) Executable and Linking Format (ELF) Specification Version 1.2</a>, etc &mldr;)</li><li>C 言語 / アセンブリ言語 / スタックの伸長などの低レイヤーの基本</li><li>リンカスクリプトを使用したコードやメモリ配置の調整方法</li><li>標準ライブラリを一切使用せずにフルスクラッチで必要な処理の実装方法</li><li>デバイスドライバのような機能の実装方法</li><li>Bootloader の実装方法</li><li>ファイル転送プロトコル (<a href=https://ja.wikipedia.org/wiki/XMODEM>XMODEM</a>) の実装方法</li><li>ELF ファイルを解析し RAM 上の指定した領域へ展開して起動させるための機能の実装方法</li><li>割り込み処理の実装方法</li><li>複数のスレッドを起動させ、優先度に応じてスレッドをスケジューリングさせる機能の実装方法</li><li>メモリ管理の機能の実装方法</li><li>IPC の機能の実装方法</li><li>ビジーループではなく外部割り込みを捌く処理の実装方法</li></ol><p>この書籍自体は割と古めの本なのですが、このような OS (Kernel) の基本的な機能やマイコンプログラミングの基礎を学べたのは貴重な経験でした。個人的には GUI の複雑なレンダリング処理の実装等の必要が無く、外部のライブラリに依存することなく OS (Kernel) の機能の実装に注力することができたので、学生の頃に読んだ <a href="https://book.mynavi.jp/ec/products/detail/id=121220">ゼロからの OS 自作入門</a> よりは取っ付きやすかったです。また、マイコンのメモリを直接的かつ自由に取り扱うことができたので、メモリ管理に対する苦手意識が減り、メモリモデルに関する関心が芽生えました。なお、<a href="https://book.mynavi.jp/ec/products/detail/id=121220">ゼロからの OS 自作入門</a> もすごいたくさんのことを学べた本なので、時間があるうちに再度読み直したいと考えています。先にこの本を読んでいれば、また見方が変わったのかなとも思います。</p><h2 id=最後に>最後に</h2><p>前半は環境構築と仕様書の読み方が一番大変だったのですが、後半は OS (Kernel) の本格的な機能を実装したのでかなり読み応えがありました。特に、割り込みによって処理が非同期的に飛ぶ辺りやメモリ管理機能の実装には手こずりました。この本を通して自分は低レイヤーではどのようなデータ構造やアルゴリズムを駆使してリソースが管理されているのか (ex. 動的なメモリの割り当てやスレッドのスケジューリングや排他制御など) に気づきました。そのため、これからはこの OS (Kernel) を拡張しつつ、他の OS (Kernel) のリソース管理がどのようなデータ構造やアルゴリズムを用いて管理されているかを調査してみたいと思います。</p><h2 id=参考>参考</h2><ul><li><a href=https://kozos.jp/books/makeos/>12 ステップで作る 組込み OS 自作入門</a></li></ul></article><nav class="no-print post-nav"><a class=prev-post href=https://haytok.jp/post/20220213/><img class=icon-text src=https://haytok.jp/img/prev.svg>cobra のソースコードを読んで
調査をしてみた</a></nav><section id=related><h4>See Also</h4><ul><li><a href=https://haytok.jp/post/20210901/>自作 OS 日記 (3)</a></li><li><a href=https://haytok.jp/post/20210831/>自作 OS 日記 (2)</a></li><li><a href=https://haytok.jp/post/20210830/>自作 OS 日記 (1)</a></li></ul></section><hr class=sep></main><footer class="container no-print"><div class=u-footer><a href=https://github.com/haytok><img class=icon-social src=https://haytok.jp/img/github.svg alt=Github></a>
<a href=https://twitter.com/haytok6><img class=icon-social src=https://haytok.jp/img/twitter.svg alt=Twitter></a>
<a href=https://haytok.jp/index.xml target=_blank><img class=icon-social src=https://haytok.jp/img/feed.svg alt=Feed></a><p>&copy; 2021 haytok</p><a href=#brand><img class=icon-text src=https://haytok.jp/img/toup.svg alt="To Up">
<span>Back to Up</span></a></div></footer></body></html>