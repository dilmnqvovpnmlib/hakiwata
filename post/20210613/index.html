<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.83.1"><title>.gitconfig を使って untracked files のみを退避させる - haKiwata</title><meta name=description content="概要  自分で運用しているブログサイトは git を用いて管理しています。新しい記事を作成する際に、untracked files のみを git stash して、退避させたいことがありました。しかし、git にはデフォルトで untracked files のみを退避させるコマンドは無いそうです。そこで、今回は .gitconfig を使用して工夫したことについての記録を残したいと思います。  背景と目的   新しい記事を作成するために hugo new コマンドで記事の雛形を作成します。過去に書いた記事を参考にしつつ新しい記事を書いていると、過去の記事にタイポを見つけて修正したくなることや、言い回しを変えたくなる時があります。その内容を修正しつつ、一通り満足の行く新しい記事を書き終えると、hugo コマンドで修正したり作成したファイルを build を行った後に push する必要があります。しかし、修正した過去の記事と新規作成した記事の build を別々に行った後に push してコミットを分けたいと考えています。そのため、このようなケースでは一旦新規作成した記事を退避させて build を行い、push します。そして、その後に git stash pop で退避させた新規作成した記事を元に戻してから build を行い、push するようにします。
  こうして untracked files のみを退避させたいのですが、このコマンドは毎回調べているイメージがありました。その調べている時間が無駄でもったいないと感じていました。そこで、今回はその無駄な手順を省くために .gitconfig を使用し、 untracked files のみを退避させるエイリアスを設定しました。また、.bashrc に記述していた git コマンドのエイリアスも .gitconfig に移して、設定ファイルの整理も行いました。
  方法  untracked files のみを退避させる方法は How to git stash only untracked files?"><link rel="shortcut icon" href=https://hakiwata.jp/img/images/kiwata.png><link rel=stylesheet href=https://hakiwata.jp/css/ui.css><link rel=stylesheet href=https://hakiwata.jp/css/main.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Fira+Mono|Lato|Raleway"><meta property="og:title" content=".gitconfig を使って untracked files のみを退避させる"><meta property="og:description" content="概要  自分で運用しているブログサイトは git を用いて管理しています。新しい記事を作成する際に、untracked files のみを git stash して、退避させたいことがありました。しかし、git にはデフォルトで untracked files のみを退避させるコマンドは無いそうです。そこで、今回は .gitconfig を使用して工夫したことについての記録を残したいと思います。  背景と目的   新しい記事を作成するために hugo new コマンドで記事の雛形を作成します。過去に書いた記事を参考にしつつ新しい記事を書いていると、過去の記事にタイポを見つけて修正したくなることや、言い回しを変えたくなる時があります。その内容を修正しつつ、一通り満足の行く新しい記事を書き終えると、hugo コマンドで修正したり作成したファイルを build を行った後に push する必要があります。しかし、修正した過去の記事と新規作成した記事の build を別々に行った後に push してコミットを分けたいと考えています。そのため、このようなケースでは一旦新規作成した記事を退避させて build を行い、push します。そして、その後に git stash pop で退避させた新規作成した記事を元に戻してから build を行い、push するようにします。
  こうして untracked files のみを退避させたいのですが、このコマンドは毎回調べているイメージがありました。その調べている時間が無駄でもったいないと感じていました。そこで、今回はその無駄な手順を省くために .gitconfig を使用し、 untracked files のみを退避させるエイリアスを設定しました。また、.bashrc に記述していた git コマンドのエイリアスも .gitconfig に移して、設定ファイルの整理も行いました。
  方法  untracked files のみを退避させる方法は How to git stash only untracked files?"><meta property="og:type" content="article"><meta property="og:url" content="https://hakiwata.jp/post/20210613/"><meta property="og:image" content="https://hakiwata.jp/img/images/kiwata.png"><meta property="article:section" content="post"><meta property="article:published_time" content="2021-06-13T06:13:26+09:00"><meta property="article:modified_time" content="2021-06-13T06:13:26+09:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://hakiwata.jp/img/images/kiwata.png"><meta name=twitter:title content=".gitconfig を使って untracked files のみを退避させる"><meta name=twitter:description content="概要  自分で運用しているブログサイトは git を用いて管理しています。新しい記事を作成する際に、untracked files のみを git stash して、退避させたいことがありました。しかし、git にはデフォルトで untracked files のみを退避させるコマンドは無いそうです。そこで、今回は .gitconfig を使用して工夫したことについての記録を残したいと思います。  背景と目的   新しい記事を作成するために hugo new コマンドで記事の雛形を作成します。過去に書いた記事を参考にしつつ新しい記事を書いていると、過去の記事にタイポを見つけて修正したくなることや、言い回しを変えたくなる時があります。その内容を修正しつつ、一通り満足の行く新しい記事を書き終えると、hugo コマンドで修正したり作成したファイルを build を行った後に push する必要があります。しかし、修正した過去の記事と新規作成した記事の build を別々に行った後に push してコミットを分けたいと考えています。そのため、このようなケースでは一旦新規作成した記事を退避させて build を行い、push します。そして、その後に git stash pop で退避させた新規作成した記事を元に戻してから build を行い、push するようにします。
  こうして untracked files のみを退避させたいのですが、このコマンドは毎回調べているイメージがありました。その調べている時間が無駄でもったいないと感じていました。そこで、今回はその無駄な手順を省くために .gitconfig を使用し、 untracked files のみを退避させるエイリアスを設定しました。また、.bashrc に記述していた git コマンドのエイリアスも .gitconfig に移して、設定ファイルの整理も行いました。
  方法  untracked files のみを退避させる方法は How to git stash only untracked files?"><script async src="https://www.googletagmanager.com/gtag/js?id=G-YXCYPL25QW"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-YXCYPL25QW',{anonymize_ip:!1})}</script></head><body><header class="container no-print"><div class=u-header><nav class=bar><ul><li><a href=https://hakiwata.jp/><img class=icon-text src=https://hakiwata.jp/img/prev.svg></a></li><li><a href=https://hakiwata.jp/about>About</a></li><li><a href=https://hakiwata.jp/post>Post</a></li><li><a href=https://hakiwata.jp/scraps>Scraps</a></li><li><a href=https://hakiwata.jp/tags>Tags</a></li></ul></nav></div></header><main class=container><article><header><hgroup id=brand><h1>.gitconfig を使って untracked files のみを退避させる</h1><h5><time datetime="2021-06-13 06:13:26 +0900 +0900">Jun 13, 2021</time>
<span class=no-print>-
<a href=https://hakiwata.jp/tags/git>git</a>
<span></h5></hgroup><hr class=sep></header><h2 id=概要>概要</h2><ul><li>自分で運用している<a href=https://hakiwata.jp>ブログサイト</a>は <code>git</code> を用いて管理しています。新しい記事を作成する際に、<code>untracked files</code> のみを <code>git stash</code> して、退避させたいことがありました。しかし、<code>git</code> にはデフォルトで <code>untracked files</code> のみを退避させるコマンドは無いそうです。そこで、今回は <code>.gitconfig</code> を使用して工夫したことについての記録を残したいと思います。</li></ul><h2 id=背景と目的>背景と目的</h2><ul><li><p>新しい記事を作成するために <code>hugo new</code> コマンドで記事の雛形を作成します。過去に書いた記事を参考にしつつ新しい記事を書いていると、過去の記事にタイポを見つけて修正したくなることや、言い回しを変えたくなる時があります。その内容を修正しつつ、一通り満足の行く新しい記事を書き終えると、<code>hugo</code> コマンドで修正したり作成したファイルを <code>build</code> を行った後に <code>push</code> する必要があります。しかし、修正した過去の記事と新規作成した記事の <code>build</code> を別々に行った後に <code>push</code> してコミットを分けたいと考えています。そのため、このようなケースでは一旦新規作成した記事を退避させて <code>build</code> を行い、<code>push</code> します。そして、その後に <code>git stash pop</code> で退避させた新規作成した記事を元に戻してから <code>build</code> を行い、<code>push</code> するようにします。</p></li><li><p>こうして <code>untracked files</code> のみを退避させたいのですが、このコマンドは毎回調べているイメージがありました。その調べている時間が無駄でもったいないと感じていました。そこで、今回はその無駄な手順を省くために <code>.gitconfig</code> を使用し、 <code>untracked files</code> のみを退避させるエイリアスを設定しました。また、<code>.bashrc</code> に記述していた <code>git</code> コマンドのエイリアスも <code>.gitconfig</code> に移して、設定ファイルの整理も行いました。</p></li></ul><h2 id=方法>方法</h2><ul><li><code>untracked files</code> のみを退避させる方法は <a href=https://stackoverflow.com/questions/39026156/how-to-git-stash-only-untracked-files>How to git stash only untracked files?</a> を参考にさせて頂きました。加えて、普段からよく使うような <code>git</code> コマンドもエイリアスに追加しました。</li></ul><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=o>[</span>alias<span class=o>]</span>
  <span class=nv>s</span> <span class=o>=</span> status
  <span class=nv>d</span> <span class=o>=</span> diff
  <span class=nv>co</span> <span class=o>=</span> commit
  <span class=nv>p</span> <span class=o>=</span> push origin HEAD
  <span class=nv>pu</span> <span class=o>=</span> pull
  <span class=nv>ch</span> <span class=o>=</span> checkout
  <span class=nv>r</span> <span class=o>=</span> reset
  <span class=nv>st</span> <span class=o>=</span> stash
  <span class=nv>stp</span> <span class=o>=</span> stash pop
  <span class=nv>stu</span> <span class=o>=</span> stash -u
  stash-untracked <span class=o>=</span> <span class=s2>&#34;!f() {    \
</span><span class=s2>      git stash;               \
</span><span class=s2>      git stash -u;            \
</span><span class=s2>      git stash pop stash@{1}; \
</span><span class=s2>  }; f&#34;</span>
</code></pre></div><ul><li><code>git stash-untracked</code> コマンドを実行した際の <code>stash list</code> の状況は以下のようになると推測できます。こうして <code>untracked files</code> のみを退避させているようです。</li></ul><table><thead><tr><th style=text-align:center>git コマンド (実行後)</th><th style=text-align:center>stash list の状況</th></tr></thead><tbody><tr><td style=text-align:center>git stash</td><td style=text-align:center>{0}: 修正ファイル</td></tr><tr><td style=text-align:center>git stash -u</td><td style=text-align:center>{0}: untracked files</td></tr><tr><td style=text-align:center></td><td style=text-align:center>{1}: 修正ファイル</td></tr><tr><td style=text-align:center>git stash pop stash@{1};</td><td style=text-align:center>{0}: untracked files</td></tr></tbody></table><ul><li>また、もともと <code>.bashrc</code> には、以下のように <code>git</code> コマンドのエイリアスを書いていました。これらを上述のようにエイリアスを <code>.gitconfig</code> に移行しました。</li></ul><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=nb>alias</span> <span class=nv>gs</span><span class=o>=</span><span class=s1>&#39;git status&#39;</span>
</code></pre></div><h2 id=感想>感想</h2><ul><li>今回は、<code>.gitconfig</code> を使用して <code>untracked files</code> のみを退避させる <code>git stash-untracked</code> を設定しました。新しく知った <code>.gitconfig</code> を使ってエイリアスを設定できて良かったです。また、<code>.bashrc</code> に書いていた <code>git</code> コマンドのエイリアスを <code>.gitconfig</code> に移行し、<code>git</code> コマンド周りの設定を整理できて良かったです。</li></ul><h2 id=参考>参考</h2><ul><li><a href=https://stackoverflow.com/questions/39026156/how-to-git-stash-only-untracked-files>How to git stash only untracked files?</a></li><li><a href=https://qiita.com/YamEiR/items/d98ba009d2925e7eb305>【Git】エイリアス晒す＆書き方まとめ</a></li></ul></article><nav class="no-print post-nav"><a class=prev-post href=https://hakiwata.jp/post/20210611/><img class=icon-text src=https://hakiwata.jp/img/prev.svg>Hugo のテンプレートを修正してみた</a>
<a class=next-post href=https://hakiwata.jp/post/20210615/>5 月の振り返り<img class=icon-text src=https://hakiwata.jp/img/next.svg></a></nav><hr class=sep></main><footer class="container no-print"><div class=u-footer><a href=https://github.com/dilmnqvovpnmlib><img class=icon-social src=https://hakiwata.jp/img/github.svg alt=Github></a>
<a href=https://twitter.com/bilmnpvovqnmlid><img class=icon-social src=https://hakiwata.jp/img/twitter.svg alt=Twitter></a>
<a href=https://hakiwata.jp/index.xml target=_blank><img class=icon-social src=https://hakiwata.jp/img/feed.svg alt=Feed></a><p>&copy; 2021 haKiwata</p><a href=#brand><img class=icon-text src=https://hakiwata.jp/img/toup.svg alt="To Up">
<span>Back to Up</span></a></div></footer></body></html>